(()=>{"use strict";function t(t){this._name=t,this._layers=[]}function n(){this._flavor="empty",this._isFilled=!1}function e(){this._flavors=[],this._total=0}function r(){e.call(this),this._flavors=["eggs","milk","chocolate","strawberry","sugar"]}function o(){e.call(this),this._flavors=["eggs","milk","lemon","ginger","sugar"]}t.prototype.getName=function(){return this._name},t.prototype.getRecipe=function(){var t=[];return this._layers.map((function(n,e){t.push(e+1+": "+n.getFlavor())})),"=== "+this._name+" ===\n"+t.join(", \n")+"\n"},t.prototype.addLayer=function(t){this._layers.push(t)},t.prototype.removeLayer=function(){return this._layers.pop()},n.prototype.getFlavor=function(){return this._flavor},n.prototype.isFilled=function(){return this._isFilled},n.prototype.fill=function(t){this._isFilled||(this._flavor=t,this._isFilled=!0)},e.prototype.getTotal=function(){return this._total},e.prototype.getFlavors=function(){return this._flavors},e.prototype.createCake=function(e,r){var o=new t(e);return r.map((function(t){var e=this._flavors[t]||this._flavors[0],r=new n;r.fill(e),o.addLayer(r)}),this),this._total++,o},e.prototype.createRandomCake=function(t,n){for(var e=[],r=0,o=this._flavors.length;r<n;r++)e[r]=Math.floor(Math.random()*o);return this.createCake(t,e)},r.prototype=Object.create(e.prototype),r.prototype.constructor=r,o.prototype=Object.create(e.prototype),o.prototype.constructor=o;let i=null;function a(t,n="#ddd"){i?"CLS"===t?i.innerHTML="":"NL"===t?i.innerHTML+="\n":(console.info("printer at [",performance.now().toFixed(2),"] says:\n",t),i.innerHTML+=`<span style="color:${n}">${t}</span>`):setTimeout((function(){a(t,n)}),50)}window.onload=function(){i=document.getElementById("printer")};class s{constructor(t){this._name=t,this._layers=[]}get name(){return this._name}set name(t){this._name=t}get recipe(){const t=[];return this._layers.map(((n,e)=>t.push(`${e+1}: ${n.flavor}`))),`=== ${this._name} ===\n${t.join(", \n")}\n`}addLayer(t){this._layers.push(t)}removeLayer(){return this._layers.pop()}}class l{constructor(){this._flavor="empty",this._isFilled=!1}get flavor(){return this._flavor}get isFilled(){return this._isFilled}fill(t){this._isFilled||(this._flavor=t,this._isFilled=!0)}}class c{constructor(){this._flavors=[],this._total=0}get total(){return this._total}get flavors(){return this._flavors}getFlavorById(t){return this._flavors[t]||this._flavors[0]||null}createCake(t,n){const e=new s(t);return n.map((t=>{const n=this.getFlavorById(t),r=new l;r.fill(n),e.addLayer(r)})),this._total++,e}createRandomCake(t,n){const e=this._flavors.length,r=[...new Array(n)].map((()=>~~(Math.random()*e)));return this.createCake(t,r)}}class u extends c{constructor(){super(),this._flavors=["eggs","milk","chocolate","strawberry","sugar"]}}class f extends c{constructor(){super(),this._flavors=["eggs","milk","lemon","ginger","sugar"]}}const h=function(){function t(t){this.name=t,this.layers=[]}return t.prototype.getName=function(){return this.name},t.prototype.setName=function(t){this.name=t},t.prototype.getRecipe=function(){var t=[];return this.layers.map((function(n,e){t.push(e+1+": "+n.getFlavor())})),"=== "+this.name+" ===\n"+t.join(", \n")+"\n"},t.prototype.addLayer=function(t){this.layers.push(t)},t.prototype.removeLayer=function(){return this.layers.pop()||null},t}(),p=function(){function t(){this.flavor="empty",this.filled=!1}return t.prototype.getFlavor=function(){return this.flavor},t.prototype.isFilled=function(){return this.filled},t.prototype.fill=function(t){this.filled||(this.flavor=t,this.filled=!0)},t}();const y=function(){function t(){this.flavors=[],this.total=0}return t.prototype.getTotal=function(){return this.total},t.prototype.getFlavors=function(){return this.flavors},t.prototype.getFlavorById=function(t){return this.flavors[t]||this.flavors[0]||"empry"},t.prototype.createCake=function(t,n){var e=this,r=new h(t);return n.map((function(t){var n=e.getFlavorById(t),o=new p;o.fill(n),r.addLayer(o)})),this.total++,r},t.prototype.createRandomCake=function(t,n){var e=this.flavors.length,r=function(t,n){for(var e=0,r=n.length,o=t.length;e<r;e++,o++)t[o]=n[e];return t}([],Array(n)).map((function(){return~~(Math.random()*e)}));return this.createCake(t,r)},t}();var m,g=(m=function(t,n){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}m(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)});const v=function(t){function n(){var n=t.call(this)||this;return n.flavors=["eggs","milk","lemon","ginger","sugar"],n}return g(n,t),n}(y);var d=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const _=function(t){function n(){var n=t.call(this)||this;return n.flavors=["eggs","milk","chocolate","strawberry","sugar"],n}return d(n,t),n}(y);var k,w,b,F;!function(){function t(t,n,e){var r=Math.floor(2+4*Math.random()),o="ProtoCake N"+Math.floor(1e3*Math.random())+"S"+r;a("At ["+performance.now().toFixed(2)+"]: ","#f88"),a("Start baking "+o+" with size "+r+"\n"),setTimeout((function(){t.push(n.createRandomCake(o,r)),a("End baking "+o+"\n","#f88"),e()}),500*r)}var n=new r,e=new o,i=[];a("Start baking some proto-cakes\n\n","#f44"),t(i,n,(function(){t(i,e,(function(){t(i,n,(function(){t(i,e,(function(){a("Stop baking cakes \n\n","#f44"),a(JSON.stringify(i,"",2)+"\n","#f44"),console.log(i)}))}))}))}))}(),(()=>{const t=(t,n)=>{const e=~~(2+4*Math.random()),r=`ClassCake N${~~(1e3*Math.random())}S${e}`;return a(`At[${performance.now().toFixed(2)}]: `,"#8f8"),a(`Start baking ${r} with size ${e}\n`),new Promise(((o,i)=>{if(t.length>=3)return i(new Error("Maximum number of cakes exceed!"));setTimeout((()=>{t.push(n.createRandomCake(r,e)),a(`End baking ${r}\n`,"#8f8"),o()}),500*e)}))},n=new u,e=new f,r=[];a("Start baking some class-cakes\n\n","#4f4"),t(r,n).then((()=>t(r,e))).then((()=>t(r,n))).then((()=>t(r,e))).catch((t=>console.error(t))).then((()=>{a("Stop baking cakes\n\n","#4f4"),a(JSON.stringify(r,"",2)+"\n","#4f4"),console.log(r)}))})(),k=function(t,n){var e=~~(2+4*Math.random()),r="TsCake N"+~~(1e3*Math.random())+"S"+e;return a("At["+performance.now().toFixed(2)+"]: ","#88f"),a("Start baking "+r+" with size "+e+"\n"),new Promise((function(o,i){if(t.length>=3)return i(new Error("Maximum number of cakes exceed!"));setTimeout((function(){t.push(n.createRandomCake(r,e)),a("End baking "+r+"\n","#88f"),o()}),500*e)}))},w=new _,b=new v,F=[],a("Start baking some ts-cakes\n\n","#44f"),k(F,w).then((function(){return k(F,b)})).then((function(){return k(F,w)})).then((function(){return k(F,b)})).catch((function(t){return console.error(t)})).then((function(){a("Stop baking cakes\n\n","44f"),a(JSON.stringify(F,null,2)+"\n","#44f"),console.log(F)}))})();